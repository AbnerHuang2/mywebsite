<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head>
<meta charset=utf-8>
<meta http-equiv=content-language content="en">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=theme-color content="rgb(255,255,255)">
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>彻底搞懂幻读 &#183; Skitii</title><meta name=title content="彻底搞懂幻读 &#183; Skitii">
<meta name=description content="彻底搞懂幻读">
<link rel=canonical href=https://skitii.vercel.app/posts/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B9%BB%E8%AF%BB/>
<link type=text/css rel=stylesheet href=/css/main.bundle.min.a6debbb9c2752cfaaf987cbf5014fd1df44fb95b3494591ae67b7f8b99579a03.css integrity="sha256-pt67ucJ1LPqvmHy/UBT9HfRPuVs0lFka5nt/i5lXmgM=">
<script type=text/javascript src=/js/appearance.min.7f7b30f0ba943330271ff38160b14e9c164505e6f179554bd8adc33a39049d93.js integrity="sha256-f3sw8LqUMzAnH/OBYLFOnBZFBebxeVVL2K3DOjkEnZM="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.b2852bbdc562f7fecf1a559c126aff98d4d9ea82e4d5356974459efd911ff15e.js integrity="sha256-soUrvcVi9/7PGlWcEmr/mNTZ6oLk1TVpdEWe/ZEf8V4=" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<meta name=google-site-verification content="PeC9Clz1swOOWEProA3d9p39srZKONgJreLma19x0Cc">
<meta property="og:title" content="彻底搞懂幻读">
<meta property="og:description" content="彻底搞懂幻读">
<meta property="og:type" content="article">
<meta property="og:url" content="https://skitii.vercel.app/posts/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B9%BB%E8%AF%BB/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-08-02T09:53:49+00:00">
<meta property="article:modified_time" content="2023-08-02T09:53:49+00:00"><meta property="og:site_name" content="Skitii">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="彻底搞懂幻读">
<meta name=twitter:description content="彻底搞懂幻读">
<script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"彻底搞懂幻读","headline":"彻底搞懂幻读","description":"彻底搞懂幻读","inLanguage":"en","url":"https:\/\/skitii.vercel.app\/posts\/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B9%BB%E8%AF%BB\/","author":{"@type":"Person","name":"Skitii"},"copyrightYear":"2023","dateCreated":"2023-08-02T09:53:49\u002b00:00","datePublished":"2023-08-02T09:53:49\u002b00:00","dateModified":"2023-08-02T09:53:49\u002b00:00","mainEntityOfPage":"true","wordCount":"1288"}]</script>
<meta name=author content="Skitii">
</head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
<div id=the-top class="absolute flex self-center">
<a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold pe-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a>
</div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10">
<nav class="flex items-start justify-between sm:items-center">
<div class="flex flex-row items-center">
<a href=/ class=mr-2>
<img src=/img/octopus.png width=64 height=64 class="max-h-[10rem] max-w-[10rem] object-scale-down object-left hidden dark:flex" alt=Skitii loading=lazy>
<img src=/img/octopus.png width=64 height=64 class="max-h-[10rem] max-w-[10rem] object-scale-down object-left dark:hidden" alt=Skitii loading=lazy>
</a>
</div><ul class="flex list-none flex-col ltr:text-right rtl:text-left sm:flex-row">
<li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
<a href=/posts/ title><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Blog</span>
</a>
</li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
<a href=/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span>
</a>
</li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
<a href=/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span>
</a>
</li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0">
<button id=search-button-m0 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600">
<span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</span>
</button>
</li></ul></nav></header><div class="relative flex flex-col grow">
<main id=main-content class=grow>
<article>
<header class=max-w-prose>
<ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
<li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/></a><span class="px-1 text-primary-500">/</span>
</li><li class=inline>
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>posts</a><span class="px-1 text-primary-500">/</span>
</li><li class="inline hidden">
<a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E5%B9%BB%E8%AF%BB/>彻底搞懂幻读</a><span class="px-1 text-primary-500">/</span>
</li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
彻底搞懂幻读
</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
<div class="flex flex-row flex-wrap items-center">
<time datetime="2023-08-02 09:53:49 +0000 UTC">2 August 2023</time><span class="px-2 text-primary-500">&#183;</span><span>1288 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span>
</div><div class="my-1 text-xs leading-relaxed text-neutral-500 dark:text-neutral-400">
<a href=/categories/mysql/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Mysql</a>
</div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
<div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8">
<div class="toc pe-5 print:hidden lg:sticky lg:top-10">
<details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5">
<summary class="-ms-5 block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
Table of Contents
</summary>
<div class="-ms-5 border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600">
<nav id=TableOfContents>
<ul>
<li><a href=#前置内容>前置内容</a>
<ul>
<li><a href=#事务隔离级别>事务隔离级别</a></li><li><a href=#mvcc>MVCC</a></li><li><a href=#mysql读取行的方式>Mysql读取行的方式</a>
<ul>
<li><a href=#快照读>快照读</a></li><li><a href=#当前读>当前读</a></li></ul></li></ul></li><li><a href=#幻读是什么>幻读是什么</a></li><li><a href=#幻读怎么产生的>幻读怎么产生的</a>
<ul>
<li><a href=#快照读场景>快照读场景</a></li><li><a href=#当前读场景>当前读场景</a></li></ul></li><li><a href=#幻读会导致什么问题>幻读会导致什么问题</a></li><li><a href=#怎么解决幻读>怎么解决幻读</a>
<ul>
<li><a href=#会引入什么新的问题>会引入什么新的问题</a></li><li><a href=#究竟应该如何设置隔离级别>究竟应该如何设置隔离级别</a></li></ul></li><li><a href=#业务思考>业务思考</a>
<ul>
<li><a href=#读已提交隔离级别会有什么问题>读已提交隔离级别会有什么问题？</a></li><li><a href=#同一个事务先查询然后根据数据状态更新数据会不会有问题>同一个事务，先查询，然后根据数据状态更新数据会不会有问题？</a></li><li><a href=#什么业务应该设置为可重复读>什么业务应该设置为可重复读？</a></li></ul></li></ul></nav></div></details>
</div></div><div class="min-w-0 min-h-0 max-w-prose grow">
<meta name=referrer content="no-referrer">
<h2 id=前置内容 class="relative group">前置内容 </h2><h3 id=事务隔离级别 class="relative group">事务隔离级别 </h3><p>未提交读
读已提交【RC】
可重复读（默认隔离级别）【RR】
序列化</p><h3 id=mvcc class="relative group">MVCC </h3><p>多版本并发控制（在没行记录后面增加插入版本号和删除版本号）</p><h3 id=mysql读取行的方式 class="relative group">Mysql读取行的方式 </h3><h4 id=快照读 class="relative group">快照读 </h4><blockquote>
<p>如果事务 隔离级别为 REPEATABLE READ（默认级别），则同一事务中的所有一致读取都会读取该事务中第一个此类读取建立的快照。您可以通过提交当前事务并在之后发出新查询来获取更新的查询快照。
通过READ COMMITTED隔离级别，事务中的每个一致读取都会设置并读取其自己的最新快照。</p></blockquote><p>来自mysql官方文档 17.7.2.3 一致的非锁定读取<a href=https://dev.mysql.com/doc/refman/8.0/en/innodb-consistent-read.html target=_blank rel="noreferrer noopener">https://dev.mysql.com/doc/refman/8.0/en/innodb-consistent-read.html</a></p><h4 id=当前读 class="relative group">当前读 </h4><p>读取最新的行（select for update. 会读取到最新的行。）</p><h2 id=幻读是什么 class="relative group">幻读是什么 </h2><p>在同一个事务中，同一个查询执行多次所看到的数据不一致。</p><h2 id=幻读怎么产生的 class="relative group">幻读怎么产生的 </h2><h3 id=快照读场景 class="relative group">快照读场景 </h3><p>每次查询都是基于快照查询，后面的修改是无法查询到的，所以不存在幻读问题。</p><h3 id=当前读场景 class="relative group">当前读场景 </h3><p>当前读只会锁住被查询的行。
但是如果这时候更新了其他行，导致满足查询条件，就也会同样出现在查询结果中。
这样的话，查询结果就不一致了。但是在当前读下，读到最新的数据看起来是合理的。
如果我改一下数据，就会把后面事务更新的数据给更新掉，导致前一个小的事务id更新了后一个大的事务id的数据。这就不合理了。
<figure>
<div class=post-img-view>
<a data-fancybox=gallery href="https://cdn.nlark.com/yuque/0/2023/png/21760570/1678709224637-47e95c27-3357-46d8-b154-f1cb12ed3980.png#averageHue=%23f9f9f9&clientId=u7fa24a84-0e5c-4&from=paste&height=567&id=u4b0088ce&originHeight=1134&originWidth=1870&originalType=binary&ratio=1&rotation=0&showTitle=false&size=211999&status=done&style=none&taskId=u84e393f0-c11c-411a-81ec-3521987f319&title=&width=935">
<img class="my-0 rounded-md" src="https://cdn.nlark.com/yuque/0/2023/png/21760570/1678709224637-47e95c27-3357-46d8-b154-f1cb12ed3980.png#averageHue=%23f9f9f9&clientId=u7fa24a84-0e5c-4&from=paste&height=567&id=u4b0088ce&originHeight=1134&originWidth=1870&originalType=binary&ratio=1&rotation=0&showTitle=false&size=211999&status=done&style=none&taskId=u84e393f0-c11c-411a-81ec-3521987f319&title=&width=935" alt=image.png>
</a>
</div></figure></p><h2 id=幻读会导致什么问题 class="relative group">幻读会导致什么问题 </h2><ol>
<li>当前读数据不一致（范围查询）</li><li>更新序列错乱</li></ol><h2 id=怎么解决幻读 class="relative group">怎么解决幻读 </h2><p>了解了幻读的产生，就知道要怎么解决了。
幻读产生的两个根本原因：</p><ol>
<li>更新其他行数据满足查询条件</li><li>增加新行</li></ol><p>mysql引入了间隙锁来解决幻读问题
下一键锁 = 行锁 + 间隙锁</p><p>问题：</p><ol>
<li>mysql是按照主键进行数据追加的。如果查询不按主键查询，那要怎么防止其他事务更新的数据满足查询条件呢？（间隙是指两行数据直接的间隙吗？或者对索引也加锁。）</li><li>如果间隙是指两行数据直接的间隙，那不就是类似于锁全表吗？</li></ol><p>eg:</p><pre tabindex=0><code>create table t(
a int primary key,
b int ,
c int
);
insert into t values(1,1,1);
insert into t values(2,2,5);
insert into t values(3,3,10);
insert into t values(4,4,16);
</code></pre><table>
<thead>
<tr>
<th>A</th><th>B</th><th>C</th></tr></thead><tbody>
<tr>
<td>begin</td><td></td><td></td></tr><tr>
<td>select * from t where c>=10 for update;</td><td></td><td></td></tr><tr>
<td></td><td>insert into t values(5,5,28);</td><td></td></tr><tr>
<td>[blocked]</td><td></td><td></td></tr><tr>
<td></td><td></td><td>update t set c = 10 where a = 1;</td></tr><tr>
<td>[blocked]</td><td></td><td></td></tr><tr>
<td>select * from t where c>=10 for update;</td><td></td><td></td></tr><tr>
<td>commit</td><td></td><td></td></tr></tbody></table><p>实测结果：
事务B和C都会被锁住。【所以这个间隙大概率是两行记录直接的间隙】</p><h3 id=会引入什么新的问题 class="relative group">会引入什么新的问题 </h3><p>并发插入问题[间隙锁可以在两个事务中存在]</p><table>
<thead>
<tr>
<th>SessionA</th><th>SessionB</th></tr></thead><tbody>
<tr>
<td>select * from t where id = 9 for update</td><td></td></tr><tr>
<td></td><td>select * from t where id = 9 for update</td></tr><tr>
<td></td><td>insert into t values(8,8,8) [blocked]</td></tr><tr>
<td>insert into t values(10,10,10) [blocked]</td><td></td></tr><tr>
<td>dead lock</td><td></td></tr></tbody></table><h3 id=究竟应该如何设置隔离级别 class="relative group">究竟应该如何设置隔离级别 </h3><p>既然可重复读处理这么麻烦也存在问题，那么究竟应该怎么设置隔离级别呢？
目前也有这样的玩法</p><ol>
<li>读已提交 + binlog=row(用于处理数据不一致的情况)</li><li>可重复读</li></ol><h2 id=业务思考 class="relative group">业务思考 </h2><h3 id=读已提交隔离级别会有什么问题 class="relative group">读已提交隔离级别会有什么问题？ </h3><p>【数据不一致】 但其实我们大部分情况下，都是一次性事务。而且基本查询都是快照读。
快照读在查询会不会有问题，举个例子，</p><table>
<thead>
<tr>
<th>事务1:</th><th>事务2</th></tr></thead><tbody>
<tr>
<td>创建订单</td><td></td></tr><tr>
<td>查询订单</td><td></td></tr><tr>
<td>向三方查询</td><td></td></tr><tr>
<td>查询失败</td><td></td></tr><tr>
<td>查询订单状态为新建</td><td></td></tr><tr>
<td></td><td>订单成功了-回调</td></tr><tr>
<td></td><td>更新订单状态为成功</td></tr><tr>
<td>更新订单状态为失败</td><td></td></tr><tr>
<td></td><td></td></tr></tbody></table><p>怎么解决呢？ 查询和更新放在同一个事务中，查询改为当前读。
所以还是需要可重复读级别啊</p><h3 id=同一个事务先查询然后根据数据状态更新数据会不会有问题 class="relative group">同一个事务，先查询，然后根据数据状态更新数据会不会有问题？ </h3><p>如上，还是会有问题的。</p><h3 id=什么业务应该设置为可重复读 class="relative group">什么业务应该设置为可重复读？ </h3><p>对数据一致性要求没那么高的业务。</p></div></section><footer class="pt-8 max-w-prose print:hidden">
<div class=flex>
<img class="!mb-0 !mt-0 me-4 h-24 w-24 rounded-full" width=96 height=96 alt=Skitii src=/img/donatello_hu71dba6f0b14209fcd6a03b819133ef67_44229_192x192_fill_box_center_3.png loading=lazy>
<div class=place-self-center>
<div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
Author
</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
Skitii
</div><div class="text-2xl sm:text-lg">
</div></div></div><script src=https://utteranc.es/client.js repo=AbnerHuang2/mywebsite issue-term=pathname theme=gruvbox-dark crossorigin=anonymous async></script>
<div class=pt-8>
<hr class="border-dotted border-neutral-300 dark:border-neutral-600">
<div class="flex justify-between pt-3">
<span>
<a class="group flex" href=/posts/mysql%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/>
<span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Mysql思维导图</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2023-08-30 10:00:49 +0000 UTC">30 August 2023</time>
</span>
</span>
</a>
</span>
<span>
<a class="group flex text-right" href=/posts/mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E7%AB%9F%E7%84%B6%E8%BF%99%E4%B9%88%E5%A4%9A%E7%BB%86%E8%8A%82/>
<span class="flex flex-col">
<span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Mysql主从同步竟然这么多细节</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
<time datetime="2023-07-27 17:07:07 +0000 UTC">27 July 2023</time>
</span>
</span>
<span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span>
</a>
</span>
</div></div></footer></article><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12">
<a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">
&uarr;
</a>
</div></main><footer class="py-10 print:hidden">
<div class="flex items-center justify-between">
<div>
<p class="text-sm text-neutral-500 dark:text-neutral-400">
&copy;
2024
Skitii
</p></div><div class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14">
<button id=appearance-switcher class="w-12 h-12" type=button title="Switch to dark appearance">
<span class="inline dark:hidden"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg>
</span></span>
<span class="hidden dark:inline"><span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg>
</span></span>
</button>
</div></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css>
<script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script>
<script type=text/javascript src=https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.min.js></script>
<script type=text/javascript src=https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/lib/L2Dwidget.0.min.js></script>
<script>(function(n,e,t){e.ChatraID="H8oixnws8SKYQkjBz";var s=n.createElement("script");e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},s.async=!0,s.src="https://call.chatra.io/chatra.js",n.head&&n.head.appendChild(s)})(document,window,"Chatra")</script>
<script type=text/javascript>L2Dwidget.init({model:{scale:1,hHeadPos:.5,vHeadPos:.618,jsonPath:"https://unpkg.com/live2d-widget-model-nito@1.0.5/assets/nito.model.json"},display:{superSample:1,width:120,height:300,position:"right",hOffset:20,vOffset:0},mobile:{show:!0,scale:1,motion:!0},react:{opacityDefault:.8,opacityOnHover:1}})</script><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://skitii.vercel.app/>
<div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
<header class="relative z-10 flex items-center justify-between flex-none px-2">
<form class="flex items-center flex-auto min-w-0">
<div class="flex items-center justify-center w-8 h-8 text-neutral-400">
<span class="relative inline-block align-text-bottom px-1 icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
</div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0>
</form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom px-1 icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
</button>
</header><section class="flex-auto px-2 overflow-auto">
<ul id=search-results>
</ul></section></div></div></div></body></html>